<select id="location" name="location">
    <option value="1" selected="selected">Alabama</option>
    <option value="50">Alaska</option>
    <option value="2">Arizona</option>
    <option value="3">Arkansas</option>
    <option value="4">California</option>
    <option value="5">Colorado</option>
    <option value="6">Connecticut</option>
    <option value="7">Delaware</option>
    <option value="8">Florida</option>
    <option value="9">Georgia</option>
    <option value="10">Idaho</option>
    <option value="11">Illinois</option>
    <option value="12">Indiana</option>
    <option value="13">Iowa</option>
    <option value="14">Kansas</option>
    <option value="15">Kentucky</option>
    <option value="16">Louisiana</option>
    <option value="17">Maine</option>
    <option value="18">Maryland</option>
    <option value="19">Massachusetts</option>
    <option value="20">Michigan</option>
    <option value="21">Minnesota</option>
    <option value="22">Mississippi</option>
    <option value="23">Missouri</option>
    <option value="24">Montana</option>
    <option value="25">Nebraska</option>
    <option value="26">Nevada</option>
    <option value="27">New Hampshire</option>
    <option value="28">New Jersey</option>
    <option value="29">New Mexico</option>
    <option value="30">New York</option>
    <option value="31">North Carolina</option>
    <option value="32">North Dakota</option>
    <option value="33">Ohio</option>
    <option value="34">Oklahoma</option>
    <option value="35">Oregon</option>
    <option value="36">Pennsylvania</option>
    <option value="37">Rhode Island</option>
    <option value="38">South Carolina</option>
    <option value="39">South Dakota</option>
    <option value="40">Tennessee</option>
    <option value="41">Texas</option>
    <option value="42">Utah</option>
    <option value="43">Vermont</option>
    <option value="44">Virginia</option>
    <option value="45">Washington</option>
    <option value="46">West Virginia</option>
    <option value="47">Wisconsin</option>
    <option value="48">Wyoming</option>
</select>

<script>
    const locations = {
        "1": "Alabama",
        "50": "Alaska",
        "2": "Arizona",
        "3": "Arkansas",
        "4": "California",
        "5": "Colorado",
        "6": "Connecticut",
        "7": "Delaware",
        "8": "Florida",
        "9": "Georgia",
        "10": "Idaho",
        "11": "Illinois",
        "12": "Indiana",
        "13": "Iowa",
        "14": "Kansas",
        "15": "Kentucky",
        "16": "Louisiana",
        "17": "Maine",
        "18": "Maryland",
        "19": "Massachusetts",
        "20": "Michigan",
        "21": "Minnesota",
        "22": "Mississippi",
        "23": "Missouri",
        "24": "Montana",
        "25": "Nebraska",
        "26": "Nevada",
        "27": "New Hampshire",
        "28": "New Jersey",
        "29": "New Mexico",
        "30": "New York",
        "31": "North Carolina",
        "32": "North Dakota",
        "33": "Ohio",
        "34": "Oklahoma",
        "35": "Oregon",
        "36": "Pennsylvania",
        "37": "Rhode Island",
        "38": "South Carolina",
        "39": "South Dakota",
        "40": "Tennessee",
        "41": "Texas",
        "42": "Utah",
        "43": "Vermont",
        "44": "Virginia",
        "45": "Washington",
        "46": "West Virginia",
        "47": "Wisconsin",
        "48": "Wyoming"
    };


    function downloadStateTemperatureData() {
        let delay = 0;
        for (const [key, value] of Object.entries(locations)) {
            const url = `https://www.ncei.noaa.gov/access/monitoring/climate-at-a-glance/statewide/time-series/${key}/pcp/all/10/2021-2023.csv?base_prd=true&begbaseyear=1901&endbaseyear=2000`
            const filename = `${value}rain.csv`;

            setTimeout(function () {
                fetch(url).then(response => response.blob()).then(blob => {
                    const blobUrl = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = blobUrl;
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                });
            }, delay);

            delay += 500;  // 增加0.5秒的延迟
        }
    }

    // 调用函数开始下载
    downloadStateTemperatureData();


</script>